# tmux 기본 설정

# 기본 쉘을 zsh로 설정
set-option -g default-shell /bin/zsh

# 프리픽스: Ctrl+A (Ctrl+B는 zsh가 가로챔)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# ghostty 호환성을 위한 extended keys 설정
set -s extended-keys on
set -s extended-keys-format csi-u
set -as terminal-features 'xterm-256color:extkeys'
set -as terminal-features 'xterm-ghostty:extkeys'

# Shift+Enter 및 Ctrl+Enter 지원 (CSI u protocol)
set -as terminal-overrides ',xterm-256color:Cr=\E[13;2u'
set -as terminal-overrides ',xterm-ghostty:Cr=\E[13;2u'
set -as terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

# 마우스 지원 (처음엔 켜두고 나중에 끄기)
set -g mouse on

# 화면 분할 단축키 개선
bind | split-window -h  # | 로 좌우 분할
bind - split-window -v  # - 로 상하 분할

# Vim 스타일 창 이동
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# 고정 위치 이동 (4분할 화면용)
bind u select-pane -t 0  # 좌측 상단
bind i select-pane -t 1  # 우측 상단
bind J select-pane -t 2  # 좌측 하단
bind K select-pane -t 3  # 우측 하단

# 세션 이름 표시
set -g status-left "[#S] "

# 상태바 색상
set -g status-bg black
set -g status-fg green

# 히스토리 증가
set -g history-limit 10000

# 세션 자동 복원 (tmux-resurrect 플러그인 필요)
# run-shell ~/.tmux/plugins/tmux-resurrect/resurrect.tmux

# ============================================
# TPM (Tmux Plugin Manager) 설정
# ============================================

# 플러그인 목록
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# breadog 테마
set -g @plugin 'mattdavis90/base16-tmux'
set -g @colors-base16 'breadog'

# TPM 초기화 (맨 아래에 위치해야 함)
run '~/.tmux/plugins/tpm/tpm'

# ============================================
# Pane Border 색상 (테마 이후 적용)
# ============================================
# 활성 pane: 청록색 테두리
set -g pane-active-border-style fg=cyan,bold

# 비활성 pane: 회색 테두리
set -g pane-border-style fg=colour240
